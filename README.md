#  OPC UA - ASP.NET μ‹¤μ‹κ°„ λ°μ΄ν„° μ—°λ™ λ° μ μ–΄ ν”„λ΅μ νΈ

λ³Έ ν”„λ΅μ νΈλ” μ‚°μ—…μ© ν‘μ¤€ ν”„λ΅ν† μ½μΈ **OPC UA**λ¥Ό ν™μ©ν•μ—¬ ν•λ“μ›¨μ–΄ λ°μ΄ν„°λ¥Ό **ASP.NET Core** μ• ν”λ¦¬μΌ€μ΄μ…κ³Ό μ—°λ™ν•κ³ , μ‹μ¤ν…μ„ μ‹¤μ‹κ°„μΌλ΅ λ¨λ‹ν„°λ§ λ° μ μ–΄ν•λ” ν†µν•© μ†”λ£¨μ…μ„ κµ¬μ¶•ν•λ” κ²ƒμ„ λ©ν‘λ΅ ν•©λ‹λ‹¤.

<br>

## π“… κ°λ° νμ¤ν† λ¦¬

### **2026-01-12: OPC UA - ASP.NET μ—°κ²° ν”„λ μ„μ›ν¬ κµ¬μ¶•**
* **μ„λ²„ ν™κ²½ μ„¤μ •**: KEPServerEXλ¥Ό ν™μ©ν•μ—¬ Modbus μ¥μΉμ™€ OPC UA ν΄λΌμ΄μ–ΈνΈ κ°„μ λΈλ¦¬μ§€ ν™κ²½μ„ μ„¤μ •ν•μ€μµλ‹λ‹¤.
* **ν΄λΌμ΄μ–ΈνΈ μ„λΉ„μ¤ κµ¬ν„**: .NET 8.0 κΈ°λ°μ OpcUaClientServiceλ¥Ό κµ¬ν„ν•μ—¬ μ„λ²„ μ ‘μ†, μ„Έμ… κ΄€λ¦¬, λ³΄μ• μΈμ¦ λ΅μ§μ„ μ™„μ„±ν•μ€μµλ‹λ‹¤.

### **2026-01-13: λ°μ΄ν„° μ „μ†΅ μµμ ν™” λ° μ μ–΄ λ©”μ„λ“ κ²€μ¦**
* **λ°μ΄ν„° μ¤νΈλ¦¬λ°**: κµ¬λ…(Subscription) λ¨λΈμ„ μ μ©ν•μ—¬ ν•λ“μ›¨μ–΄μ μ„μΉ(Position), μ†λ„(Speed), μƒνƒ(Status) λ°μ΄ν„°λ¥Ό μ‹¤μ‹κ°„μΌλ΅ μ „μ†΅λ°›λ” κΈ°λ¥μ„ κµ¬ν„ν•μ€μµλ‹λ‹¤.
* **RobotDK μ—°λ™ ν…μ¤νΈ**: μ™Έλ¶€ μ‹λ®¬λ μ΄μ… ν΄μΈ RobotDKμ OPC UA Methodλ¥Ό ν™μ©ν•μ—¬ λ°μ΄ν„° μ „μ†΅ ν…μ¤νΈν•μ€μµλ‹λ‹¤.
* **λΉ„λ™κΈ° μ μ–΄ λ΅μ§**: WriteTagAsync λ©”μ„λ“λ¥Ό ν†µν•΄ ν•λ“μ›¨μ–΄ νλΌλ―Έν„°λ¥Ό μ‹¤μ‹κ°„μΌλ΅ λ³€κ²½ν•λ” μ μ–΄ κΈ°λ¥μ„ μ¶”κ°€ν•κ³  κ²€μ¦ν•μ€μµλ‹λ‹¤.

<br>

## π— μ‹μ¤ν… μ•„ν‚¤ν…μ²



* **OPC UA Server (Middleware)**: ν•λ“μ›¨μ–΄ λ μ§€μ¤ν„°λ¥Ό OPC UA λ…Έλ“λ΅ λ§¤ν•‘ν•μ—¬ μƒμ„ μ• ν”λ¦¬μΌ€μ΄μ…μ— μΈν„°νμ΄μ¤ μ κ³µ, ν•λ“μ›¨μ–΄ λ°μ΄ν„°λ¥Ό μμ§‘ λ° μ μ–΄.
* **ASP.NET Core Application**: μμ§‘λ λ°μ΄ν„°λ¥Ό κ°€κ³µν•μ—¬ μΈν„°νμ΄μ¤ μ κ³µ(Web)κ³Ό λ¨λ‹ν„°λ§ κΈ°λ¥ μ κ³µ(Unity).

<br>

## π›  μ£Όμ” κΈ°λ¥
* **μ‹¤μ‹κ°„ λ¨λ‹ν„°λ§**: 100ms λ‹¨μ„μ λ°μ΄ν„° κµ¬λ…μ„ ν†µν•΄ μ§€μ—° μ—†λ” μƒνƒ κ°μ‹ κ°€λ¥.
* **λ²”μ© μ“°κΈ° μΈν„°νμ΄μ¤**: λ‹¤μ–‘ν• λ°μ΄ν„° νƒ€μ…(ushort, float λ“±)μ— λ€μ‘ν•λ” WriteTagAsync<T> λ©”μ„λ“ μ κ³µ.
* **μλ™ λ³µκµ¬ μ‹μ¤ν…**: ν†µμ‹  λ‹¨μ  μ‹ μ§€μ •λ κ°„κ²©μΌλ΅ μ„Έμ…μ„ μ¬μƒμ„±ν•λ” μλ™ μ¬μ—°κ²°(Auto-Reconnect) λ΅μ§ λ‚΄μ¥.
* **λ°μ΄ν„° λ¬΄κ²°μ„± μ²λ¦¬**: 16λΉ„νΈ λ μ§€μ¤ν„° μ΅°ν•©μ„ ν†µν•΄ 32λΉ„νΈ Float λ°μ΄ν„°λ¥Ό μ¤μ°¨ μ—†μ΄ λ³µμ›.

<br>

## π’» μ‚¬μ© μμ‹ (Control Logic)

```csharp
// μ¥μΉ μ†λ„ μ μ–΄ μμ‹
public async Task UpdateDeviceSpeed(ushort newSpeed)
{
    // WriteSpeedAsyncλ¥Ό νΈμ¶ν•μ—¬ OPC UA μ„λ²„λ¥Ό ν†µν•΄ μ¥μΉμ— μ†λ„ λ…λ Ή μ „λ‹¬
    bool isSuccess = await _opcUaService.WriteSpeedAsync(newSpeed);
    
    if (isSuccess) 
        Console.WriteLine("λ…λ Ήμ΄ μ„±κ³µμ μΌλ΅ μ „λ‹¬λμ—μµλ‹λ‹¤.");
}
β οΈ λΌμ΄μ„ μ¤ λ° μ΄μ μ°Έκ³ μ‚¬ν•­
λΌμ΄μ„ μ¤ μ μ•½: μ‚¬μ© μ¤‘μΈ μ„λ²„ μ†”λ£¨μ…μ λ°λ¨ λΌμ΄μ„ μ¤ λ§λ£(2μ‹κ°„ μ ν•) μ‹ λ°νƒ€μ„ μ¬μ‹μ‘μ΄ ν•„μ”ν•©λ‹λ‹¤.

μ ‘κ·Ό κ¶ν•: μ μ–΄ κΈ°λ¥μ„ μ‚¬μ©ν•κΈ° μ„ν•΄μ„λ” μ„λ²„ μΈ΅ νƒκ·Έ μ„¤μ •μ—μ„ **'Client Access'**κ°€ Read/Writeλ΅ μ„¤μ •λμ–΄ μμ–΄μ•Ό ν•©λ‹λ‹¤.
